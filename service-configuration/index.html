
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Factory Orchestrator Documentation">
      
      
      
        <meta name="author" content="themar-msft;hajya">
      
      
        <link rel="canonical" href="https://microsoft.github.io/FactoryOrchestrator/service-configuration/">
      
      <link rel="shortcut icon" href="../images/fo-logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.0.3">
    
    
      
        <title>Service configuration - Factory Orchestrator</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1655a90d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.7fa14f5b.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="amber">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#factory-orchestrator-service-configuration-using-appsettingsjson" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://microsoft.github.io/FactoryOrchestrator/" title="Factory Orchestrator" class="md-header__button md-logo" aria-label="Factory Orchestrator">
      
  <img src="../images/fo-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Factory Orchestrator
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Service configuration
            
          </span>
        </div>
      </div>
    </div>
    <div class="md-header__options">
      
    </div>
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/microsoft/FactoryOrchestrator/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://microsoft.github.io/FactoryOrchestrator/" title="Factory Orchestrator" class="md-nav__button md-logo" aria-label="Factory Orchestrator">
      
  <img src="../images/fo-logo.png" alt="logo">

    </a>
    Factory Orchestrator
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/microsoft/FactoryOrchestrator/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../get-started-with-factory-orchestrator/" class="md-nav__link">
        Get Started
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tasks-and-tasklists/" class="md-nav__link">
        Tasks & TaskLists
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Service configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Service configuration
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sample-appsettingsjson" class="md-nav__link">
    Sample appsettings.json
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../use-the-factory-orchestrator-app/" class="md-nav__link">
        Using the application
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../use-the-factory-orchestrator-api/" class="md-nav__link">
        Using PowerShell or C# code
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../find-factory-orchestrator-devices/" class="md-nav__link">
        Find Factory Orchestrator devices
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../factory-orchestrator-client-usage-samples/" class="md-nav__link">
        Client API samples
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../ClientLibrary/Microsoft-FactoryOrchestrator-Client/" class="md-nav__link">
        Client Library Class Reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../CoreLibrary/Microsoft-FactoryOrchestrator-Core/" class="md-nav__link">
        Core Library Class Reference
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../uninstall-factory-orchestrator/" class="md-nav__link">
        Uninstall Factory Orchestrator
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sample-appsettingsjson" class="md-nav__link">
    Sample appsettings.json
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/microsoft/FactoryOrchestrator/edit/master/docs/service-configuration.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <!-- Copyright (c) Microsoft Corporation. -->
<!-- Licensed under the MIT license. -->

<h1 id="factory-orchestrator-service-configuration-using-appsettingsjson">Factory Orchestrator service configuration using appsettings.json</h1>
<p>The Factory Orchestrator service has many configurable settings that impact its startup behavior, enabled features, and more. This configuration is easily modified using an <a href="https://docs.microsoft.com/en-us/dotnet/core/extensions/configuration-providers#json-configuration-provider">appsettings.json file</a>.</p>
<p>The appsettings.json file is checked for in the following locations in order, with the last appsettings.json file found 'winning' if there are conflicts:</p>
<ol>
<li>The directory where the service executable (Microsoft.FactoryOrchestrator.Service) is located</li>
<li><strong>(Windows only)</strong> %DATADRIVE%\TestContent\Container\FactoryOrchestrator</li>
<li>The <a href="#factory-orchestrator-service-log-file">service log file directory</a>: <code>%ProgramData%\FactoryOrchestrator\</code> (Windows) or <code>/var/log/FactoryOrchestrator/</code>(Linux)</li>
<li><strong>(Linux only)</strong> The <code>/etc/FactoryOrchestrator/</code> directory</li>
</ol>
<p>The following table describes each setting and its usage:</p>
<table>
<thead>
<tr>
<th>Setting name</th>
<th>Type</th>
<th>UsageÂ </th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#initialtasklists-firstboottasks-and-everyboottasks">InitialTaskLists</a>Â </td>
<td>string</td>
<td>Path to a <a href="../tasks-and-tasklists/#author-and-manage-factory-orchestrator-tasklists">FactoryOrchestratorXML</a> file. The <a href="../tasks-and-tasklists/#author-and-manage-factory-orchestrator-tasklists">TaskLists</a> in this file are loaded on first boot only; they are NOT run by default unless RunInitialTaskListsOnFirstBoot is set. This file defines the default "first boot" state of the DUT, that is the TaskLists &amp; tasks that are shown in the app UI. <a href="#initialtasklists-firstboottasks-and-everyboottasks">See below for more details.</a></td>
</tr>
<tr>
<td>RunInitialTaskListsOnFirstBoot</td>
<td>bool</td>
<td>If set to "true", the TaskLists defined by InitialTaskListsÂ are run on first boot of the DUT (or the first time the service is run). They are not run on subsquent boots.</td>
</tr>
<tr>
<td><a href="#initialtasklists-firstboottasks-and-everyboottasks">FirstBootTasks</a></td>
<td>string</td>
<td>Path to a <a href="../tasks-and-tasklists/#author-and-manage-factory-orchestrator-tasklists">FactoryOrchestratorXML</a> file. These TaskLists are run once, and then "hidden", on the first boot of the DUT (or the first time the service is run). They are not run on subsquent boots. <a href="#initialtasklists-firstboottasks-and-everyboottasks">See below for more details.</a></td>
</tr>
<tr>
<td><a href="#initialtasklists-firstboottasks-and-everyboottasks">EveryBootTasks</a></td>
<td>string</td>
<td>Path to a <a href="../tasks-and-tasklists/#author-and-manage-factory-orchestrator-tasklists">FactoryOrchestratorXML</a> file. These TaskLists are run on every boot of the DUT, including first boot. They are then "hidden". <a href="#initialtasklists-firstboottasks-and-everyboottasks">See below for more details.</a></td>
</tr>
<tr>
<td><a href="#network-access">EnableNetworkAccess</a></td>
<td>bool</td>
<td>If set to "true", the service will allow connections from clients/apps anywhere on your local network. Defaults to false. <strong>âš  <a href="#network-access">See below for more details.</a> âš </strong></td>
</tr>
<tr>
<td>NetworkPort</td>
<td>int</td>
<td>The network port the service uses to communicate with clients, even local loopback clients. Defaults to 45684.</td>
</tr>
<tr>
<td>TaskRunLogFolder</td>
<td>string</td>
<td>Path of the directory where you want Task run logs saved. This setting is a first run default; it can be overriden at runtime by the <a href="../ClientLibrary/Microsoft-FactoryOrchestrator-Client-FactoryOrchestratorClient-SetLogFolder%28string_bool%29/">SetLogFolder</a>() API. See <a href="../tasks-and-tasklists/#factory-orchestrator-task-log-files">Tasks and Tasklists</a> for details about the log files for individual Task runs.</td>
</tr>
<tr>
<td>AllowedLocalLoopbackApps</td>
<td>string</td>
<td><strong>Windows only.</strong> Semi-colon separated list of Windows app "Package Family Name"(s). The Factory Orchestrator service will enable local loopback on the given apps every boot. Requires "checknetisolation.exe" is found in your %PATH%. See <a href="https://docs.microsoft.com/en-us/windows/iot-core/develop-your-app/loopback#enabling-loopback-for-a-uwp-application">this Windows IoT page</a> for more information.</td>
</tr>
<tr>
<td>DisableCommandPromptPage</td>
<td>bool</td>
<td>If set to "true", the Factory Orchestrator app will not show the "Command prompt" page.</td>
</tr>
<tr>
<td>DisableWindowsDevicePortalPage</td>
<td>bool</td>
<td><strong>Windows only.</strong> If set to "true", the Factory Orchestrator app will not show the "Device portal" page.</td>
</tr>
<tr>
<td>DisableUWPAppsPage</td>
<td>bool</td>
<td><strong>Windows only.</strong> If set to "true", the Factory Orchestrator app will not show the "UWP apps" page.</td>
</tr>
<tr>
<td>DisableManageTasklistsPage</td>
<td>bool</td>
<td>If set to "true", the Factory Orchestrator app will not show the "Manage TaskLists" page.</td>
</tr>
<tr>
<td>DisableFileTransferPage</td>
<td>bool</td>
<td>If set to "true", the Factory Orchestrator app will not show the "File Transfer" page.</td>
</tr>
<tr>
<td>SSLCertificateFile</td>
<td>string</td>
<td>Path to X509Certificate2 file. If provided the Factory Orchestrator Service will use the provided certificate for ssl encryption to communicate with client.</td>
</tr>
<tr>
<td>IpcLogLevel</td>
<td><a href="https://docs.microsoft.com/en-us/dotnet/api/microsoft.extensions.logging.loglevel">LogLevel enum</a></td>
<td>Sets the logging level for the IPC binaries. If set to "Debug", or lower information about every client API call will be saved to the <a href="#factory-orchestrator-service-log-file">service log</a>.</td>
</tr>
<tr>
<td>DisableContainerSupport</td>
<td>bool</td>
<td><strong>Windows only.</strong> If set to "true", the service will not check for a container running Factory Orchestrator on your PC.</td>
</tr>
</tbody>
</table>
<h2 id="sample-appsettingsjson">Sample appsettings.json</h2>
<p>Here's an example of what a valid appsettings.json file looks like.</p>
<pre><code class="language-json">{
    &quot;EnableNetworkAccess&quot;:&quot;true&quot;,
    &quot;NetworkPort&quot;:&quot;45000&quot;,
    &quot;DisableFileTransferPage&quot;:&quot;true&quot;,
    &quot;InitialTaskLists&quot;:&quot;/etc/InitialTaskLists.xml&quot;
}
</code></pre>
<h1 id="additional-details">Additional details</h1>
<h2 id="network-access">Network Access</h2>
<p>By default, the Factory Orchestrator service only allows client connections from the same device the service is running on (i.e. localhost only). However, service can be configured to allow connections from clients anywhere on your local network, by setting EnableNetworkAccess to "true" in your <a href="#factory-orchestrator-service-configuration-using-appsettings.json">appsettings.json file</a>.</p>
<p><b></p>
<p align="center">âš âš âš âš âš âš âš âš âš âš âš âš </p>
<p align="center"><i>WARNING: Please read and understand the following before enabling network access!</i></p>
<p align="center">âš âš âš âš âš âš âš âš âš âš âš âš </p>
<p></b></p>
<ul>
<li>âš  The service allows any client to connect to it without authentication. Any connected client has full access to the service's computer, including the ability to send or copy files, and/or run any command or program with administrator rights. âš  (The service has SSL encryption, but it is server-only, clients are not authenticated.)</li>
<li>âš  If you configure the service to automatically start, the service is configured to run from boot. Depending on the service &amp; PC configuration it may even be running before a user has logged on to the computer. âš </li>
<li>âš  Once network access is enabled, it will remain enabled until "EnableNetworkAccess" is set to "false" and the service is restarted. âš </li>
<li>âš  The service and client send information over the network in SSL encrypted JSON using TCP. It is vulnerable to man-in-the-middle attacks, as the service defaults to a predefined SSL certificate unless a custom certificate is used. âš </li>
<li>âš  The service currently has minimal logging about what clients are connected to it and what commands each client has executed. âš </li>
</ul>
<p>To check if network access is currently enabled use one of the following:</p>
<ul>
<li>The Factory Orchestrator app's "About" page.</li>
<li>The console output from Microsoft.FactoryOrchestrator.Service.exe</li>
<li>The <a href="#factory-orchestrator-service-log-file">service log file</a></li>
<li>The <a href="../ClientLibrary/Microsoft-FactoryOrchestrator-Client-FactoryOrchestratorClient-IsNetworkAccessEnabled%28%29/">IsNetworkAccessEnabled</a> API.</li>
</ul>
<h3 id="firewall-configuration">Firewall configuration</h3>
<p>Depending on the configuration of the OS you are using, you may need to configure the firewall to allow the Factory Orchestrator service to communicate over your local network. Factory Orchestrator uses TCP port 54684 for client&lt;-&gt;service communication and UDP port 5353 for <a href="../find-factory-orchestrator-devices/">DNS-SD</a>.</p>
<p>On Windows, run the following command from an Administrator PowerShell window to allow Factory Orchestrator through the Windows firewall:</p>
<pre><code class="language-powershell">$FoPath = (Get-CimInstance win32_service | ?{$_.Name -like 'Microsoft.FactoryOrchestrator'}).PathName.replace(' -IsService', ''); netsh advfirewall firewall add rule name=&quot;Factory Orchestrator service in&quot; dir=in action=allow program=&quot;$FoPath&quot; enable=yes; netsh advfirewall firewall add rule name=&quot;Factory Orchestrator service out&quot; dir=out action=allow program=&quot;$FoPath&quot; enable=yes
</code></pre>
<p>On Ubuntu and many other Linux distros, run the following Bash commands:</p>
<pre><code class="language-bash">sudo ufw allow 45684
sudo ufw allow 5353
</code></pre>
<p>If you set a custom network port via the NetworkPort setting, use that port number instead of 45684.</p>
<h2 id="initialtasklists-firstboottasks-and-everyboottasks">InitialTaskLists, FirstBootTasks, and EveryBootTasks</h2>
<p><em>ðŸ’¡ <a href="https://github.com/microsoft/FactoryOrchestrator/issues/109">We are considering reworking InitialTaskLists and *BootTasks, as it is hard to understand the use cases and tradeoffs for each type</a>. ðŸ’¡</em></p>
<p>The Factory Orchestrator service looks for certain <a href="../tasks-and-tasklists/#author-and-manage-factory-orchestrator-tasklists">FactoryOrchestratorXML</a> files when it starts, based on file paths set in the InitialTaskLists, FirstBootTasks, and EveryBootTasksÂ settings. You can use these FactoryOrchestratorXML files to pre-load tasks into Factory Orchestrator (without running them), run tasks the first time a device boots, or run tasks every time a device boots.</p>
<p>These 3 FactoryOrchestratorXML files are executed in the following order:</p>
<ol>
<li>FirstBootTasks (if it is first boot)</li>
<li>EveryBootTasks</li>
<li>Then finally InitialTaskLists (if it is first boot &amp; RunInitialTaskListsOnFirstBoot is set).</li>
</ol>
<p>The FirstBootTasksÂ &amp; EveryBootTasksÂ settings are intended to be used for "configuration" &amp; "pre-setup" operations, as they are tracked separately from all other Tasks, and their state is 'hidden' on completion (not show in app UI and not returned by most client APIs). For example, starting a non-critical logger service every boot would be a good use of the EveryBootTasks. On the other hand, InitialTaskListsÂ is intended to be used to setup the "first run" state of Factory Orchestrator. Keep in mind this state is only the "first run" state, it may change as client(s) interact with Factory Orchestrator.</p>
<p>FirstBootTasksÂ &amp; EveryBootTasks have the following 'rules':</p>
<ul>
<li>While you can author normal <code>&lt;Tasks&gt;</code> in the *BootTasks files, <a href="../tasks-and-tasklists/#background-tasks"><code>&lt;BackgroundTasks&gt;</code></a> are especially useful, as you can define <code>&lt;BackgroundTasks&gt;</code> which start on boot, are never expected to ever exit, and will run in the background forever (provided <code>TerminateBackgroundTasksOnCompletion="false"</code>).</li>
<li>When all <code>&lt;Tasks&gt;</code> defined in the *BootTasks FactoryOrchestratorXML files are done executing, the service "resets" and any TaskLists &amp; Tasks defined in thoes 2 files are "hidden". This means that the app UI will only show the TaskLists defined by the InitialTaskListsÂ setting if this is the first boot, and possibly any TaskListsÂ that have been added at runtime by a client (if this isn't the first boot).</li>
<li><code>&lt;TaskLists&gt;</code> defined in the *BootTasks FactoryOrchestratorXML files are only returned by GetTaskListGuids() and GetTaskListSummaries() <a href="../use-the-factory-orchestrator-api/">client methods</a> <strong>only while the service is actively executing boot TaskLists</strong>. Upon completion of all boot TaskLists, you can only query boot TaskList information via the GetBootTaskListGuids(), &amp; GetBootTaskListSummaries() client methods. You can also query the *BootTasks Tasks and TaskLists directly <strong>at any time</strong> if you know their GUID using QueryTask(), QueryTaskList(), and QueryTaskRun().</li>
<li>The Factory Orchestrator service does not allow certain client commands to run until all <code>&lt;Tasks&gt;</code> (excluding <code>&lt;BackgroundTasks&gt;</code>) defined in the relevant *BootTasks files are done executing. You will get a FactoryOrchestratorBootTasksExecutingException if you call them while the *BootTasks files are running. You can check the <a href="./#factory-orchestrator-logs">FactoryOrchestrator service log file</a> to see if the *BootTasks files are done executing. Or use the IsExecutingBootTasks() <a href="../use-the-factory-orchestrator-api/">client API</a>. Lastly, when the service is running one of the two *BootTasks files, you'll see a warning in the Factory Orchestrator app UI: <img alt="Service is executing Boot tasks, many functions are disabled until finished or aborted" src="../images/fo-background-tasks-executing.png" /></li>
</ul>
<p>You can inspect the <a href="./#factory-orchestrator-logs">FactoryOrchestrator service and Task run log files</a> for details about the status and/or results of the *BootTasks FactoryOrchestratorXML files, in "EveryBootTaskLists" &amp; "FirstBootTaskLists" subfolders in the task run log directory.</p>
<h1 id="factory-orchestrator-logs">Factory Orchestrator logs</h1>
<h2 id="factory-orchestrator-service-log-file">Factory Orchestrator service log file</h2>
<p>The service log file contains details about the operation of the Factory Orchestrator service. It is always found at <code>%ProgramData%\FactoryOrchestrator\FactoryOrchestratorService.log</code> on Windows and <code>/var/log/FactoryOrchestrator/FactoryOrchestratorService.log</code> on Linux. Inspect this log for details about the service's operation.</p>
<h2 id="factory-orchestrator-task-log-files">Factory Orchestrator Task log files</h2>
<p>See <a href="../tasks-and-tasklists/#factory-orchestrator-task-log-files">Tasks and Tasklists</a> for details about the log files for individual Task runs.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../tasks-and-tasklists/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Tasks & TaskLists
            </div>
          </div>
        </a>
      
      
        <a href="../use-the-factory-orchestrator-app/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Using the application
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.fb4a9340.min.js", "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.ca5457b8.min.js"></script>
      
    
  </body>
</html>