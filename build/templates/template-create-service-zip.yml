# Copyright (c) Microsoft Corporation.
# Licensed under the MIT license.

parameters:
  BuildConfiguration: 'Release'
  BuildPlatform: 'x86'
  BuildOS: 'win'
  BinDir: '$(Build.ARTIFACTSTAGINGDIRECTORY)/bin/'
# Publishes Service. Creates Service vPacks.
steps:
- task: PowerShell@2
  displayName: 'Create Service Zip ${{ parameters.BuildOS }}-${{ parameters.BuildPlatform }}'
  inputs:
    targetType: filePath
    filePath: $(FORepoRoot)/build/internal/CreateServiceZip.ps1
    arguments: ' -BuildConfiguration ${{ parameters.BuildConfiguration }} -BuildPlatform ${{ parameters.BuildPlatform }} -BuildOS ${{ parameters.BuildOS }} -BinDir ${{ parameters.BinDir }} -DestinationDir ${{ parameters.BinDir }}${{ parameters.BuildConfiguration }}/Publish/Zips/'
    failOnStderr: true
    pwsh: true
  timeoutInMinutes: 5
